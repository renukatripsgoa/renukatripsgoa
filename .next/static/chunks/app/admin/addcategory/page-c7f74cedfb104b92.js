(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5640],{84658:function(e,l,a){Promise.resolve().then(a.bind(a,72395))},49332:function(e,l,a){"use strict";var s=a(57437);a(2265),l.Z=()=>(0,s.jsxs)("div",{className:"animate-pulse p-4 space-y-4 rounded-xl border border-gray-200",children:[(0,s.jsx)("div",{className:"h-36 bg-gray-200 rounded-lg"}),(0,s.jsx)("div",{className:"h-6 bg-gray-200 rounded"}),(0,s.jsx)("div",{className:"h-4 bg-gray-200 rounded"}),(0,s.jsx)("div",{className:"h-4 bg-gray-200 rounded"})]})},72395:function(e,l,a){"use strict";a.r(l),a.d(l,{default:function(){return k}});var s=a(57437),t=a(2265),r=a(89317),d=a(83662),i=a(24077),o=a(95256),n=a(81887),c=a(47971),h=a(38472),m=a(18422),u=a(10883),x=a(39819),v=a(8127),g=a(49332);let p=e=>{let{id:l,onSetResult:a}=e,[u,g]=t.useState(!1),[p,b]=t.useState("md"),[f,j]=(0,t.useState)({maincategory:"",subcategory:"",adult:"",youth:"",percouple:"",childthreetoseven:"",childabovethree:"",childabovetwelve:"",childabovefour:"",description:""}),[y,N]=(0,t.useState)("");async function w(){let e=await h.Z.post("/api/category",{operation:"fetchsinglecategory",_id:l});j(e.data.fetchsinglecategory),N(e.data.fetchsinglecategory.ratings)}let C=e=>{w(),b(e),g(!0)},P=()=>{g(!1)},A=e=>/^[0-9]*$/.test(e),S=e=>{var l=e.target.name,a=e.target.value;["adult","youth","percouple","childthreetoseven"].includes(l)?A(a)&&j({...f,[l]:a}):j({...f,[l]:a})},k=async e=>{e.preventDefault();let s=await h.Z.post("/api/category",{operation:"editcategory",_id:l,maincategory:f.maincategory,subcategory:f.subcategory,adult:f.adult,youth:f.youth,percouple:f.percouple,childthreetoseven:f.childthreetoseven,childabovethree:f.childabovethree,childabovetwelve:f.childabovetwelve,childabovefour:f.childabovefour,ratings:y,description:f.description});j(s.data),200===s.data.status?(alert(s.data.message),a(s.data.result),g(!1)):401===s.data.status&&alert(s.data.message)};return(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"mt-[1rem]",children:["5xl"].map(e=>(0,s.jsxs)(r.A,{color:"primary",onPress:()=>C(e),children:[(0,s.jsx)("span",{children:(0,s.jsx)(m.Z,{className:"w-[15px] h-[15px]"})})," ","Edit"]},e))}),(0,s.jsx)(d.R,{size:p,isOpen:u,onClose:P,children:(0,s.jsx)(i.A,{children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.k,{className:"flex flex-col gap-1",children:"Modal Title"}),(0,s.jsx)(n.I,{children:(0,s.jsx)("form",{children:(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-5",children:[(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("label",{children:"Main Category"}),(0,s.jsx)("input",{type:"text",onChange:S,value:f.maincategory,name:"maincategory",className:"border border-gray-300 mt-2 p-2 rounded-md font-light text-sm",required:!0,disabled:!0})]}),(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("label",{children:"Sub Category"}),(0,s.jsx)("input",{type:"text",onChange:S,value:f.subcategory,name:"subcategory",className:"border border-gray-300 mt-2 p-2 rounded-md font-light text-sm",disabled:!0})]}),(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("label",{children:"Adults Price"}),(0,s.jsx)("input",{type:"text",name:"adult",value:f.adult,onChange:S,className:"border border-gray-300 mt-2 p-2 rounded-md font-light text-sm"})]}),(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("label",{children:"Youth Price"}),(0,s.jsx)("input",{type:"text",name:"youth",value:f.youth,onChange:S,className:"border border-gray-300 mt-2 p-2 rounded-md font-light text-sm"})]}),(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("label",{children:"Per Couple Price"}),(0,s.jsx)("input",{type:"text",name:"percouple",value:f.percouple,onChange:S,className:"border border-gray-300 mt-2 p-2 rounded-md font-light text-sm"})]}),(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("label",{children:"Child (3 to 7 years) Price"}),(0,s.jsx)("input",{type:"text",name:"childthreetoseven",value:f.childthreetoseven,onChange:S,className:"border border-gray-300 mt-2 p-2 rounded-md font-light text-sm"})]}),(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("label",{children:"Child Above (3 years) Price"}),(0,s.jsx)("input",{type:"text",name:"childabovethree",value:f.childabovethree,onChange:S,className:"border border-gray-300 mt-2 p-2 rounded-md font-light text-sm"})]}),(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("label",{children:"Child Above (12 years) Price"}),(0,s.jsx)("input",{type:"text",name:"childabovetwelve",value:f.childabovetwelve,onChange:S,className:"border border-gray-300 mt-2 p-2 rounded-md font-light text-sm"})]}),(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("label",{children:"Child Above (4 years) Price"}),(0,s.jsx)("input",{type:"text",name:"childabovefour",value:f.childabovefour,onChange:S,className:"border border-gray-300 mt-2 p-2 rounded-md font-light text-sm"})]}),(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("label",{className:"text-gray-700",children:"Description:"}),(0,s.jsx)("textarea",{name:"description",value:f.description,onChange:S,className:"border border-gray-300 mt-2 p-2 rounded-md font-light text-sm"})]}),(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("label",{children:"Add Ratings"}),(0,s.jsx)(x.d,{defaultSelectedKey:y,onInputChange:e=>{N(e)},className:"mt-2 p-2 font-light text-sm",variant:"bordered",color:"default",radius:"md",children:[{label:"0",value:"0"},{label:"0.5",value:"0.5"},{label:"1",value:"1"},{label:"1.5",value:"1.5"},{label:"2",value:"2"},{label:"2.5",value:"2.5"},{label:"3",value:"3"},{label:"3.5",value:"3.5"},{label:"4",value:"4"},{label:"4.5",value:"4.5"},{label:"5",value:"5"}].map(e=>(0,s.jsx)(v.R,{value:e.value,children:e.label},e.value))},y)]})]})})}),(0,s.jsxs)(c.R,{children:[(0,s.jsx)(r.A,{color:"danger",variant:"light",onPress:P,children:"Close"}),(0,s.jsx)(r.A,{color:"primary",onClick:k,children:"Submit"})]})]})})})]})};var b=()=>{let[e,l]=(0,t.useState)("Tour"),[a,m]=t.useState(!1),[b,f]=t.useState("md"),[j,y]=(0,t.useState)({maincategory:"",subcategory:"",adult:"",youth:"",percouple:"",childthreetoseven:"",childabovethree:"",childabovetwelve:"",childabovefour:"",description:""}),[N,w]=(0,t.useState)("0"),[C,P]=(0,t.useState)("Tour"),[A,S]=(0,t.useState)([]),k=()=>{m(!1)},_=e=>/^[0-9]*$/.test(e),Z=e=>{P(e),l(e)},R=e=>{var l=e.target.name,a=e.target.value;["adult","youth","percouple","childthreetoseven"].includes(l)?_(a)&&y({...j,[l]:a}):y({...j,[l]:a})};(0,t.useEffect)(()=>{async function e(){S((await h.Z.post("/api/category",{operation:"fetchsinglemaincategory",maincategory:C})).data.fetchmaincategorydata)}e(),C&&e()},[C]);let E=async e=>{if(e.preventDefault(),!j.maincategory){alert("please fill the category");return}let l=await h.Z.post("/api/category",{operation:"addcategory",maincategory:j.maincategory,subcategory:j.subcategory,adult:j.adult,youth:j.youth,percouple:j.percouple,childthreetoseven:j.childthreetoseven,childabovethree:j.childabovethree,childabovetwelve:j.childabovetwelve,childabovefour:j.childabovefour,ratings:N,description:j.description});200===l.data.status?(alert(l.data.message),window.location.reload()):401===l.data.status?alert(l.data.message):500===l.data.status?alert(l.data.messafe):alert("please fill category field and prices")},z=async e=>{if(window.confirm("are you sure")){let l=await h.Z.post("/api/category",{operation:"deletecategory",_id:e});200===l.data.status?(alert(l.data.message),window.location.reload()):401===l.data.status&&alert(l.data.message)}},[F,L]=(0,t.useState)([]),O=async()=>{L((await h.Z.post("/api/category",{operation:"fetchallcategory"})).data.fetchallcategory)};(0,t.useEffect)(()=>{O()},[]);let D=[...new Set(F.map(e=>e.maincategory))],I=e=>{S(e)};return(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"flex justify-end m-5"}),(0,s.jsx)(d.R,{size:b,isOpen:a,onClose:k,children:(0,s.jsx)(i.A,{children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.k,{className:"flex flex-col gap-1",children:"Modal Title"}),(0,s.jsx)(n.I,{children:(0,s.jsx)("form",{children:(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-5",children:[(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("label",{children:"Main Category"}),(0,s.jsx)("input",{type:"text",onChange:R,value:j.maincategory,name:"maincategory",className:"border border-gray-300 mt-2 p-2 rounded-md font-light text-sm",required:!0})]}),(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("label",{children:"Sub Category"}),(0,s.jsx)("input",{type:"text",onChange:R,value:j.subcategory,name:"subcategory",className:"border border-gray-300 mt-2 p-2 rounded-md font-light text-sm",required:!0})]}),(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("label",{children:"Adults (16+ years) Price"}),(0,s.jsx)("input",{type:"text",name:"adult",value:j.adult,onChange:R,className:"border border-gray-300 mt-2 p-2 rounded-md font-light text-sm"})]}),(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("label",{children:"Youth (7+ years) Price"}),(0,s.jsx)("input",{type:"text",name:"youth",value:j.youth,onChange:R,className:"border border-gray-300 mt-2 p-2 rounded-md font-light text-sm"})]}),(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("label",{children:"Per Couple Price"}),(0,s.jsx)("input",{type:"text",name:"percouple",value:j.percouple,onChange:R,className:"border border-gray-300 mt-2 p-2 rounded-md font-light text-sm"})]}),(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("label",{children:"Child (3 to 7 years) Price"}),(0,s.jsx)("input",{type:"text",name:"childthreetoseven",value:j.childthreetoseven,onChange:R,className:"border border-gray-300 mt-2 p-2 rounded-md font-light text-sm"})]}),(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("label",{children:"Child Above (3 years) Price"}),(0,s.jsx)("input",{type:"text",name:"childabovethree",value:j.childabovethree,onChange:R,className:"border border-gray-300 mt-2 p-2 rounded-md font-light text-sm"})]}),(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("label",{children:"Child Above (12 years) Price"}),(0,s.jsx)("input",{type:"text",name:"childabovetwelve",value:j.childabovetwelve,onChange:R,className:"border border-gray-300 mt-2 p-2 rounded-md font-light text-sm"})]}),(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("label",{children:"Child Above (4 years) Price"}),(0,s.jsx)("input",{type:"text",name:"childabovefour",value:j.childabovefour,onChange:R,className:"border border-gray-300 mt-2 p-2 rounded-md font-light text-sm"})]}),(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("label",{className:"text-gray-700",children:"description:"}),(0,s.jsx)("textarea",{name:"description",value:j.description,onChange:R,className:"border border-gray-300 mt-2 p-2 rounded-md font-light text-sm"})]}),(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("label",{children:"Add Ratings"}),(0,s.jsx)(x.d,{defaultSelectedKey:N,onInputChange:e=>{w(e)},className:"mt-2 p-2 font-light text-sm",variant:"bordered",color:"default",radius:"md",children:[{label:"0",value:"0"},{label:"0.5",value:"0.5"},{label:"1",value:"1"},{label:"1.5",value:"1.5"},{label:"2",value:"2"},{label:"2.5",value:"2.5"},{label:"3",value:"3"},{label:"3.5",value:"3.5"},{label:"4",value:"4"},{label:"4.5",value:"4.5"},{label:"5",value:"5"}].map(e=>(0,s.jsx)(v.R,{value:e.value,children:e.label},e.value))})]})]})})}),(0,s.jsxs)(c.R,{children:[(0,s.jsx)(r.A,{color:"danger",variant:"light",onPress:k,children:"Close"}),(0,s.jsx)(r.A,{color:"primary",onClick:E,children:"submit"})]})]})})}),(0,s.jsx)("div",{className:"flex justify-start items-center w-[95%] mx-auto",children:(0,s.jsx)("div",{className:"flex gap-4 w-full lg:w-[65%]",children:D.map((l,a)=>(0,s.jsx)("div",{className:"flex justify-center items-center flex-1 rounded-2xl p-2 cursor-pointer text-center ".concat(e===l?"bg-blue-500 text-white":"bg-gray-200"),onClick:()=>Z(l),children:(0,s.jsx)("p",{children:l})},a))})}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4  mt-5 gap-8 w-[95%] mx-auto",children:A&&A.length>0?A.map(e=>(0,s.jsxs)("div",{className:"rounded-2xl p-6 bg-gray-200 flex flex-col h-full",children:[(0,s.jsxs)("div",{className:"flex-grow flex flex-col gap-2 lg:gap-5",children:[e.subcategory&&(0,s.jsx)("p",{className:"font-semibold text-xl lg:text-2xl text-blue-500",children:e.subcategory}),(0,s.jsxs)("div",{children:[e.adult&&(0,s.jsxs)("p",{className:"font-semibold mt-2",children:["Adult Price:"," ",(0,s.jsx)("span",{className:"font-normal ml-1",children:e.adult})]}),e.youth&&(0,s.jsxs)("p",{className:"font-semibold mt-2",children:["Youth Price:"," ",(0,s.jsx)("span",{className:"font-normal ml-1",children:e.youth})]}),e.percouple&&(0,s.jsxs)("p",{className:"font-semibold mt-2",children:["Per couple Price:"," ",(0,s.jsx)("span",{className:"font-normal ml-1",children:e.percouple})]}),e.childthreetoseven&&(0,s.jsxs)("p",{className:"font-semibold mt-2",children:["Child (3 to 7 years):"," ",(0,s.jsx)("span",{className:"font-normal ml-1",children:e.childthreetoseven})]}),e.childabovetwelve&&(0,s.jsxs)("p",{className:"font-semibold mt-2",children:["Child Above (12 years):"," ",(0,s.jsx)("span",{className:"font-normal ml-1",children:e.childabovetwelve})]}),e.childabovethree&&(0,s.jsxs)("p",{className:"font-semibold mt-2",children:["Child Above (3 years):"," ",(0,s.jsx)("span",{className:"font-normal ml-1",children:e.childabovethree})]}),e.childabovefour&&(0,s.jsxs)("p",{className:"font-semibold mt-2",children:["Child Above (4 years):"," ",(0,s.jsx)("span",{className:"font-normal ml-1",children:e.childabovefour})]}),e.childbelowseven&&(0,s.jsxs)("p",{className:"font-semibold mt-2",children:["Child Below (7 years):"," ",(0,s.jsx)("span",{className:"font-normal ml-1",children:e.childbelowseven})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-5 mt-[2rem]",children:[(0,s.jsx)(p,{id:e._id,onSetResult:I}),(0,s.jsx)("div",{children:(0,s.jsxs)(r.A,{className:"mt-4 bg-gray-200 border-2 border-primary text-blue-700 font-medium",onClick:()=>z(e._id),children:[(0,s.jsx)("span",{children:(0,s.jsx)(u.Z,{className:"w-[15px] h-[15px]"})})," ","Delete"]})})]})]},e._id)):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(g.Z,{}),(0,s.jsx)(g.Z,{}),(0,s.jsx)(g.Z,{}),(0,s.jsx)(g.Z,{}),(0,s.jsx)(g.Z,{})]})})]})},f=a(84037),j=a(17451),y=a(10810),N=a(6339),w=a(30998),C=a(16463),P=a(72558),A=a(87138),S=a(85592),k=()=>{var e,l,a,d,i,o;let[n,c]=(0,t.useState)({}),h=(0,C.useRouter)();(0,t.useEffect)(()=>{(async()=>{c(await (0,w.getSession)())})()},[]);let m=(0,s.jsxs)(f.g,{children:[(0,s.jsx)("div",{children:(0,s.jsx)("div",{className:"px-1 py-2 flex gap-10 flex-col ",children:n&&(null==n?void 0:null===(e=n.user)||void 0===e?void 0:e.user_role)==="admin"?(0,s.jsx)(j.z,{name:null==n?void 0:null===(l=n.user)||void 0===l?void 0:l.user_id,description:"",avatarProps:{src:"https://www.svgrepo.com/show/509009/avatar-thinking-3.svg"},className:"text-black"}):""})}),(0,s.jsx)("div",{className:"flex flex-col items-start mr-6",children:(0,s.jsx)(r.A,{variant:"shadow",color:"danger",size:"sm",className:"left-4 mt-3 mb-3",startContent:(0,s.jsx)(P.Z,{}),onClick:async e=>{try{await (0,w.signOut)({redirect:!1}),c(null),h.push("/adminlogin"),window.location.reload()}catch(e){console.error("Sign out error:",e)}},children:"Logout"})})]});return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"sticky w-full bg-background ",children:(0,s.jsx)("div",{className:"flex mx-auto items-center justify-between bg-blue-500 py-3  ",children:(0,s.jsx)("div",{className:"flex grow justify-end mx-3 ",children:n&&(null==n?void 0:null===(a=n.user)||void 0===a?void 0:a.user_role)==="admin"?(null==n?void 0:null===(d=n.user)||void 0===d?void 0:d.user_id)===void 0&&(null==n?void 0:null===(i=n.user)||void 0===i?void 0:i.user_role)===void 0?(0,s.jsx)(A.default,{href:"/adminlogin",className:(0,S.L)({color:"primary",radius:"full",variant:"shadow"}),children:"Login/Sign Up"}):(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(y.j,{placement:"bottom",color:"default",backdrop:"transparent",children:[(0,s.jsx)(N.b,{children:(0,s.jsx)(r.A,{color:"primary",variant:"link",className:"capitalize",children:(0,s.jsx)(j.z,{name:null==n?void 0:null===(o=n.user)||void 0===o?void 0:o.user_id,description:"",avatarProps:{src:"https://www.svgrepo.com/show/509003/avatar-thinking-6.svg"},className:"text-white "})})}),m]},"bottom")}):(0,s.jsx)(A.default,{href:"/adminlogin",className:(0,S.L)({color:"primary",radius:"full",variant:"shadow"}),children:"Login/Sign Up"})})})}),(0,s.jsx)("div",{children:(0,s.jsx)(b,{})})]})}}},function(e){e.O(0,[3325,1048,3302,8472,7059,5560,2971,7023,1744],function(){return e(e.s=84658)}),_N_E=e.O()}]);