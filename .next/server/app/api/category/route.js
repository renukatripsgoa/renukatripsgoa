"use strict";(()=>{var e={};e.id=5252,e.ids=[5252],e.modules={11185:e=>{e.exports=require("mongoose")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},21231:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>v,patchFetch:()=>j,requestAsyncStorage:()=>h,routeModule:()=>f,serverHooks:()=>x,staticGenerationAsyncStorage:()=>m});var s={};r.r(s),r.d(s,{GET:()=>p,POST:()=>y});var o=r(49303),n=r(88716),a=r(60670),i=r(90183),u=r(11185),c=r.n(u);let g=new u.Schema({maincategory:{type:String},subcategory:{type:String},adult:{type:String},youth:{type:String},percouple:{type:String},childbelowseven:{type:String,default:"No Charge"},childthreetoseven:{type:String},childabovethree:{type:String},childabovetwelve:{type:String},childabovefour:{type:String},ratings:{type:String},description:{type:String}}),d=c().models.Tour||c().model("Tour",g);var l=r(87070);async function p(e){try{await (0,i.Z)();let t=e.nextUrl.searchParams.get("maincategory"),r=e.nextUrl.searchParams.get("subcategory"),s=[],o=[];return s=await d.find(),o=await d.find({maincategory:t,subcategory:r}),l.NextResponse.json({result:s,resultByCategory:o,status:200,success:!0})}catch(e){return l.NextResponse.json({status:500,success:!1})}}async function y(e){let t=await e.json();if(await (0,i.Z)(),"addcategory"===t.operation)try{let{maincategory:e,subcategory:r,adult:s,youth:o,percouple:n,childbelowseven:a,childthreetoseven:i,childabovethree:u,childabovetwelve:c,childabovefour:g,ratings:p,description:y}=t,f=new d({maincategory:e,subcategory:r,adult:s,youth:o,percouple:n,childthreetoseven:i,childabovethree:u,childabovetwelve:c,childabovefour:g,ratings:p,childbelowseven:"No Charge",description:y});return await f.save(),l.NextResponse.json({status:200,message:"Category added succesfully",newCategory:f})}catch(e){return console.error("Error during user registration:",e),l.NextResponse.json({status:500,message:"An error occurred during registration"})}else if("editcategory"===t.operation)try{let{_id:e,adult:r,youth:s,percouple:o,childbelowseven:n,childthreetoseven:a,childabovethree:i,childabovetwelve:u,childabovefour:c,ratings:g,description:p}=t,y=await d.findByIdAndUpdate(e,{adult:r,youth:s,percouple:o,childthreetoseven:a,childabovethree:i,childabovetwelve:u,childabovefour:c,ratings:g,childbelowseven:"No Charge",description:p}),f=await d.find();if(!y)return l.NextResponse.json({status:401,message:"Category not found"});return l.NextResponse.json({status:200,message:"category updated successfully",editcategory:y,result:f})}catch(e){return console.error("Error during user registration:",e),l.NextResponse.json({status:500,message:"An error occurred during registration"})}else if("deletecategory"===t.operation)try{let{_id:e}=t;if(!await d.findByIdAndDelete(e))return l.NextResponse.json({status:401,message:"category not found"});return l.NextResponse.json({status:200,message:"category delete successfully"})}catch(e){return console.error("Error during user registration:",e),l.NextResponse.json({status:500,message:"An error occurred during registration"})}else if("fetchallcategory"===t.operation)try{let e=await d.find({});if(!e)return l.NextResponse.json({status:401,message:"No Categories found"});return l.NextResponse.json({status:200,message:"fetch all categories",fetchallcategory:e})}catch(e){return console.error("Error during user registration:",e),l.NextResponse.json({status:500,message:"An error occurred during registration"})}else if("fetchsinglecategory"===t.operation)try{let{_id:e}=t,r=await d.findById(e);if(!r)return l.NextResponse.json({status:401,message:"category not found"});return l.NextResponse.json({status:200,message:"fetch single category successfully",fetchsinglecategory:r})}catch(e){return console.error("Error during user registration:",e),l.NextResponse.json({status:500,message:"An error occurred during registration"})}else if("fetchcategorywisedata"===t.operation)try{let{maincategory:e,subcategory:r}=t,s=await d.findOne({maincategory:e,subcategory:r});if(!s)return l.NextResponse.json({status:401,message:"maincategoery not found"});return l.NextResponse.json({status:200,message:"maincategory data fetch successfully",fetchmaincategorydata:s})}catch(e){return console.error("Error during user registration:",e),l.NextResponse.json({status:500,message:"An error occurred during registration"})}else if("fetchsinglemaincategory"===t.operation)try{let{maincategory:e}=t,r=await d.find({maincategory:e});if(!r)return l.NextResponse.json({status:401,message:"maincategoery not found"});return l.NextResponse.json({status:200,message:"maincategory data fetch successfully",fetchmaincategorydata:r})}catch(e){return console.error("Error during user registration:",e),l.NextResponse.json({status:500,message:"An error occurred during registration"})}else if("fetchsinglemaincategory"===t.operation)try{let{maincategory:e}=t,r=await d.find({maincategory:e});if(!r)return l.NextResponse.json({status:401,message:"maincategoery not found"});return l.NextResponse.json({status:200,message:"maincategory data fetch successfully",fetchmaincategorydata:r})}catch(e){return console.error("Error during user registration:",e),l.NextResponse.json({status:500,message:"An error occurred during registration"})}}let f=new o.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/category/route",pathname:"/api/category",filename:"route",bundlePath:"app/api/category/route"},resolvedPagePath:"C:\\Users\\Admin\\Desktop\\_work\\renukatripsgoa\\app\\api\\category\\route.js",nextConfigOutput:"",userland:s}),{requestAsyncStorage:h,staticGenerationAsyncStorage:m,serverHooks:x}=f,v="/api/category/route";function j(){return(0,a.patchFetch)({serverHooks:x,staticGenerationAsyncStorage:m})}},90183:(e,t,r)=>{r.d(t,{Z:()=>n});var s=r(11185),o=r.n(s);let n=async()=>{try{await o().connect(process.env.MONGO_URL),console.log("MongoDB connected successfully")}catch(e){console.error("error occured while connection",e)}}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[8948,5972],()=>r(21231));module.exports=s})();